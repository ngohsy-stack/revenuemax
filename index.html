<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revenue Analysis: MR = 0</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --brand-teal: rgb(47, 130, 117); /* Pantone 335 */
            --brand-teal-light: rgba(47, 130, 117, 0.1);
            --brand-black: rgb(35, 31, 32); 
            --brand-white: rgb(255, 255, 255); 
            --gray-bg: #f6f7f9;
        }

        body {
            font-family: 'Lato', sans-serif;
            font-weight: 400;
            background-color: var(--brand-white);
            color: var(--brand-black);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-bottom: 80px;
        }

        .header {
            width: 100%;
            padding: 20px 0;
            border-bottom: 1px solid #d6d8da;
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .dot { width: 12px; height: 12px; border-radius: 50%; background-color: var(--brand-teal); }

        .container { max-width: 1100px; width: 95%; }

        .card {
            border: 2px solid var(--brand-teal);
            border-radius: 12px;
            padding: 30px;
            background: var(--brand-white);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            display: grid;
            grid-template-columns: 1.4fr 1fr;
            gap: 40px;
            align-items: start; 
        }

        .theory-section { grid-column: span 2; }

        .callout {
            background-color: var(--gray-bg);
            border-left: 6px solid var(--brand-teal);
            padding: 25px;
            margin-bottom: 10px;
            border-radius: 4px;
        }

        .callout h3 { 
            font-family: 'Lato', sans-serif;
            font-weight: 400; 
            margin: 0 0 15px 0; 
            color: var(--brand-teal); 
            font-size: 1.5rem;
            line-height: 1.3;
        }

        .callout h3 strong { font-weight: 700; }

        .callout p {
            margin: 0;
            font-size: 1.15rem;
            line-height: 1.6;
        }

        /* Graph Styling */
        .visual-area {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        svg {
            overflow: visible;
            margin-bottom: 10px;
        }

        .axis { stroke: var(--brand-black); stroke-width: 2; }
        
        .tick-label { 
            font-family: 'Lato', sans-serif; 
            font-size: 11px; 
            fill: #666; 
            font-weight: 400; 
        }
        
        .line-ar { stroke: var(--brand-black); stroke-width: 3; fill: none; }
        .line-mr { stroke: var(--brand-teal); stroke-width: 3; stroke-dasharray: 4; fill: none; }
        
        .tr-rect { fill: var(--brand-teal); fill-opacity: 0.15; stroke: var(--brand-teal); stroke-width: 1.5; }
        
        .axis-title { 
            font-family: 'Lato', sans-serif;
            font-size: 13px; 
            font-weight: 400; 
            fill: var(--brand-black); 
            text-transform: uppercase; 
        }

        .mr-zero-marker { fill: var(--brand-teal); stroke: white; stroke-width: 2; }

        /* Controls */
        .controls {
            width: 100%;
            padding: 20px;
            background: var(--brand-teal-light);
            border-radius: 10px;
            text-align: center;
            border: 1px solid var(--brand-teal);
            margin-top: 10px;
        }

        .controls label {
            font-family: 'Lato', sans-serif;
            font-weight: 400;
            font-size: 1rem;
        }

        input[type=range] { width: 85%; cursor: pointer; accent-color: var(--brand-teal); height: 8px; }

        /* Table Area */
        .table-area { 
            overflow-x: auto; 
            margin-top: -25px; 
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
            border: 1px solid var(--brand-teal);
        }

        th { 
            background: var(--brand-teal); 
            color: white; 
            padding: 12px; 
            font-family: 'Lato', sans-serif;
            font-weight: 400; 
            border: 1px solid var(--brand-teal);
        }
        
        td { 
            padding: 10px; 
            text-align: center; 
            font-family: 'Lato', sans-serif;
            font-weight: 400; 
            border: 1px solid var(--brand-teal); 
        }
        
        tr.highlight { background-color: var(--brand-teal-light); color: var(--brand-teal); }
        
        /* Highlighted Max Row Styles */
        tr.max-row { 
            background-color: #e6f4ea; 
            outline: 2px solid var(--brand-teal); 
        }
        
        /* Bold text for the max row (Q=5) */
        tr.max-row td {
            font-weight: 700;
        }

        /* Color the last column (MR) green in the max row */
        tr.max-row td:last-child {
            color: var(--brand-teal);
        }

        @media (max-width: 768px) {
            .card { grid-template-columns: 1fr; }
            .theory-section { grid-column: span 1; }
            .table-area { margin-top: 20px; } 
        }
    </style>
</head>
<body>

<div class="header"><div class="dot"></div></div>

<div class="container">
    <div class="card">
        <div class="theory-section">
            <div class="callout">
                <h3>The firm maximises revenue when it produces a quantity where <strong>MR = 0</strong></h3>
                <p>The shaded area is Total Revenue. As Quantity increases, the area expands until it reaches its maximum at Q = 6. At this exact point, the Dashed MR Line crosses the X-axis. Beyond this, any further increase in Quantity causes Total Revenue to fall.</p>
            </div>
        </div>

        <div class="visual-area">
            <svg width="400" height="300" viewBox="0 0 400 300">
                <!-- X and Y Axes -->
                <line x1="40" y1="260" x2="380" y2="260" class="axis" /> 
                <!-- Extended Y-axis line up to -20 to accommodate the tick at 25 (which is at -15) -->
                <line x1="40" y1="-20" x2="40" y2="260" class="axis" />  

                <!-- X Axis Ticks and Labels -->
                <g id="x-ticks"></g>
                <text x="210" y="295" class="axis-title" text-anchor="middle">Quantity (Q)</text>

                <!-- Y Axis Ticks and Labels -->
                <g id="y-ticks"></g>
                <text x="15" y="140" class="axis-title" transform="rotate(-90, 15, 140)" text-anchor="middle">Price / MR</text>

                <!-- Total Revenue Rectangle -->
                <rect id="tr-area" x="40" y="260" width="0" height="0" class="tr-rect" />

                <!-- Revenue Lines -->
                <!-- P = 22 - 2Q. Start (0,22), End (11,0). -->
                <line x1="40" y1="18" x2="370" y2="260" class="line-ar" />
                <!-- Realigned DD label -->
                <text x="320" y="215" font-family="'Lato', sans-serif" font-size="12" font-weight="700" fill="rgb(35, 31, 32)">DD=P</text>
                
                <!-- MR crosses at Q=6. -->
                <line x1="40" y1="18" x2="220" y2="260" class="line-mr" />

                <!-- Fixed Point: MR = 0 Marker at Q=6 -->
                <circle cx="220" cy="260" r="6" class="mr-zero-marker" />
                <text x="225" y="255" font-family="'Lato', sans-serif" font-size="10" font-weight="400" fill="rgb(47,130,117)">MR=0</text>

                <!-- Dynamic Point Marker -->
                <circle id="marker-p" cx="40" cy="40" r="5" fill="black" />
            </svg>

            <div class="controls">
                <label>Current Quantity: <span id="q-val" style="color:var(--brand-teal); font-size:1.6rem;">0</span></label><br>
                <input type="range" id="q-slider" min="0" max="10" value="0" step="1">
            </div>
        </div>

        <div class="table-area">
            <table>
                <thead>
                    <tr>
                        <th>Q</th>
                        <th>Price (AR)</th>
                        <th>Total Rev</th>
                        <th>Marginal Rev</th>
                    </tr>
                </thead>
                <tbody id="data-table"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    const xBase = 40;
    const yBase = 260;
    const xScale = 30; 
    const yScale = 11; 

    const data = [];
    for (let q = 0; q <= 10; q++) {
        // P = 22 - 2Q
        let p = 22 - (2 * q);
        let tr = p * q;
        let mr = "-";
        
        // Calculate Discrete Marginal Revenue: TR(q) - TR(q-1)
        if (q > 0) {
            let prevP = 22 - (2 * (q - 1));
            let prevTr = prevP * (q - 1);
            mr = tr - prevTr;
        }

        data.push({ q, p, tr, mr });
    }

    const tableBody = document.getElementById('data-table');
    const slider = document.getElementById('q-slider');
    const qVal = document.getElementById('q-val');
    const trArea = document.getElementById('tr-area');
    const markerP = document.getElementById('marker-p');

    function setupAxes() {
        const xTicks = document.getElementById('x-ticks');
        const yTicks = document.getElementById('y-ticks');

        for (let i = 0; i <= 10; i++) {
            let x = xBase + (i * xScale);
            xTicks.innerHTML += `
                <line x1="${x}" y1="${yBase}" x2="${x}" y2="${yBase + 5}" stroke="black" />
                <text x="${x}" y="${yBase + 18}" class="tick-label" text-anchor="middle">${i}</text>
            `;
        }

        // Ticks up to 25
        for (let i = 0; i <= 25; i += 5) {
            let y = yBase - (i * yScale);
            yTicks.innerHTML += `
                <line x1="${xBase - 5}" y1="${y}" x2="${xBase}" y2="${y}" stroke="black" />
                <text x="${xBase - 10}" y="${y + 4}" class="tick-label" text-anchor="end">${i}</text>
            `;
        }
    }

    tableBody.innerHTML = data.map(d => `
        <tr id="row-${d.q}">
            <td>${d.q}</td>
            <td>$${d.p}</td>
            <td>$${d.tr}</td>
            <td>${d.mr === "-" ? "-" : (d.mr >= 0 ? "$" + d.mr : "-$" + Math.abs(d.mr))}</td>
        </tr>
    `).join('');

    function update(q) {
        q = parseInt(q);
        const d = data[q];
        qVal.innerText = q;

        const w = q * xScale;
        const h = d.p * yScale;
        trArea.setAttribute('width', w);
        trArea.setAttribute('height', h);
        trArea.setAttribute('y', yBase - h);

        markerP.setAttribute('cx', xBase + w);
        markerP.setAttribute('cy', yBase - h);

        document.querySelectorAll('tr').forEach(r => r.classList.remove('highlight', 'max-row'));
        const row = document.getElementById(`row-${q}`);
        row.classList.add('highlight');
        
        // Highlight row 6 where MR is explicitly 0
        if (q === 6) row.classList.add('max-row');
    }

    slider.oninput = (e) => update(e.target.value);
    setupAxes();
    update(0);
</script>

</body>
</html>
